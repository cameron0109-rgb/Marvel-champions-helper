<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>MC Solo Prebuilt — iPhone Friendly</title>
<style>
html,body{height:100%;margin:0;background:#071018;color:#e9f6f6;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}
header{padding:14px;background:linear-gradient(90deg,#08202a,#0b2a34);display:flex;align-items:center;gap:10px;}
header h1{font-size:16px;margin:0;}
main{padding:12px;display:flex;flex-direction:column;gap:12px}
.card{background:#07202a;padding:12px;border-radius:12px;border:1px solid #12333b;box-shadow:0 6px 18px rgba(0,0,0,0.6);}
label{font-size:13px;display:block;margin-bottom:6px;color:#9fd9d9}
select,input,button{font-size:16px;padding:10px;border-radius:10px;border:1px solid #15484d;background:#042127;color:#dff;}
button{background:#0aa; color:#012; font-weight:600;}
.row{display:flex;gap:8px;flex-wrap:wrap}
.bigbtn{flex:1;padding:14px;border-radius:12px;background:#06c;color:white;font-weight:700;border:none}
.log{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, monospace;background:#00171a;padding:10px;border-radius:8px;height:160px;overflow:auto;font-size:13px}
img.cardimg{max-width:100%;border-radius:8px;margin-top:10px;border:1px solid #123;}
.center{display:flex;gap:8px;align-items:center;justify-content:center}
.thumb{width:48px;height:48px;border-radius:8px;background:#022;padding:6px;display:flex;align-items:center;justify-content:center}
.muted{opacity:0.7;font-size:13px}
.small{font-size:13px}
@media (min-width:720px){ main{max-width:980px;margin:0 auto} }
</style>
</head>
<body>
<header>
  <div class="thumb">MC</div>
  <h1>MC Solo Prebuilt — iPhone</h1>
</header>
<main>
  <section class="card">
    <div class="small muted">Hero deck</div>
    <div class="row" style="margin-top:8px">
      <select id="heroSelect" aria-label="Select hero" style="flex:1">
        <option value="">Choose hero...</option>
        <option value="spider">Spider-Man</option>
        <option value="iron">Iron Man</option>
        <option value="marvel">Captain Marvel</option>
      </select>
      <button id="loadHero">Load Hero</button>
    </div>
  </section>

  <section class="card">
    <div class="small muted">Villain</div>
    <div class="row" style="margin-top:8px">
      <select id="villainSel" style="flex:1">
        <option value="rhino">Rhino</option>
        <option value="klaw">Klaw</option>
        <option value="ultron">Ultron</option>
      </select>
      <select id="difficulty">
        <option value="normal">Normal (I+II)</option>
        <option value="expert">Expert (II+III)</option>
      </select>
      <select id="modular">
        <option value="standard">Standard</option>
        <option value="modular">Modular</option>
      </select>
      <button id="loadVillain">Load Villain</button>
    </div>
    <div id="villainInfo" class="muted small" style="margin-top:8px"></div>
  </section>

  <section class="card">
    <div class="row">
      <button id="readyDraw" class="bigbtn">Ready & Draw</button>
      <button id="villainPhase" class="bigbtn" style="background:#f25">Villain Phase</button>
    </div>
    <div style="margin-top:10px" class="row">
      <div style="flex:1">
        <div class="muted small">Villain HP</div>
        <div class="row"><input id="vHP" type="number" value="20" style="width:120px"><button id="vHpMinus">-</button><button id="vHpPlus">+</button></div>
      </div>
      <div style="flex:1">
        <div class="muted small">Main scheme threat</div>
        <div class="row"><input id="threat" type="number" value="0" style="width:120px"><button id="threatPlus">+1</button></div>
      </div>
    </div>
  </section>

  <section class="card" id="cardPanel">
    <div class="small muted">Last encounter card</div>
    <div id="cardDisplay" class="small" style="margin-top:8px"></div>
  </section>

  <section class="card">
    <div class="muted small">Log</div>
    <div id="log" class="log"></div>
  </section>
</main>

<script>
const logEl = document.getElementById('log');
function log(msg){ const d=new Date().toLocaleTimeString(); logEl.innerHTML += `<div>[${d}] ${msg}</div>`; logEl.scrollTop = logEl.scrollHeight; }

const state = {
  hero: {name:'—', deck:[], hand:[], handSize:5},
  villain: {name:'—', deck:[], discard:[], stages:[], stageIndex:0, hp:0, hpMax:0, attack:0, scheme:0}
};

// Prebuilt hero decks with card text & MarvelCDB image URLs
const HERO_DECKS = {
  spider: {
    name:'Spider-Man',
    handSize:5,
    deck:[
      {title:'Web Swing',text:'Deal 2 damage to 1 enemy.',image:'https://marvelcdb.com/bundles/cards/01001.png'},
      {title:'Agility',text:'Draw 1 card.',image:'https://marvelcdb.com/bundles/cards/01002.png'},
      {title:'Counter-Punch',text:'Deal 1 damage back when attacked.',image:'https://marvelcdb.com/bundles/cards/01003.png'},
      {title:'Resource',text:'Gain 1 resource.',image:'https://marvelcdb.com/bundles/cards/01004.png'},
      {title:'Web Shield',text:'Reduce damage by 2.',image:'https://marvelcdb.com/bundles/cards/01005.png'}
    ]
  },
  iron: {
    name:'Iron Man',
    handSize:6,
    deck:[
      {title:'Repulsor Blast',text:'Deal 3 damage.',image:'https://marvelcdb.com/bundles/cards/02001.png'},
      {title:'Arc Reactor',text:'Gain 1 resource.',image:'https://marvelcdb.com/bundles/cards/02002.png'},
      {title:'Tech Upgrade',text:'Upgrade a card.',image:'https://marvelcdb.com/bundles/cards/02003.png'},
      {title:'Evade',text:'Avoid damage this turn.',image:'https://marvelcdb.com/bundles/cards/02004.png'},
      {title:'Resource',text:'Gain 1 resource.',image:'https://marvelcdb.com/bundles/cards/02005.png'}
    ]
  },
  marvel: {
    name:'Captain Marvel',
    handSize:6,
    deck:[
      {title:'Photon Blast',text:'Deal 4 damage.',image:'https://marvelcdb.com/bundles/cards/03001.png'},
      {title:'Cosmic Flight',text:'Evade and draw a card.',image:'https://marvelcdb.com/bundles/cards/03002.png'},
      {title:'Energy Absorption',text:'Heal 2 damage.',image:'https://marvelcdb.com/bundles/cards/03003.png'},
      {title:'Evade',text:'Avoid damage this turn.',image:'https://marvelcdb.com/bundles/cards/03004.png'},
      {title:'Resource',text:'Gain 1 resource.',image:'https://marvelcdb.com/bundles/cards/03005.png'}
    ]
  }
};

// Prebuilt villain decks (example images and text)
const VILLAIN_DECKS = {
  rhino:{name:'Rhino',stages:[{hp:14,attack:2,scheme:1},{hp:16,attack:3,scheme:2}],encounters:[
    {title:'Rampage',text:'Deal 2 damage to hero.',image:'https://marvelcdb.com/bundles/cards/27174a.png'},
    {title:'Charge',text:'Gain +1 attack this turn.',image:'https://marvelcdb.com/bundles/cards/27175a.png'}
  ]},
  klaw:{name:'Klaw',stages:[{hp:12,attack:1,scheme:2},{hp:16,attack:2,scheme:2}],encounters:[
    {title:'Sonic Boom',text:'Deal 1 damage to all heroes.',image:'https://marvelcdb.com/bundles/cards/17401a.png'},
    {title:'Minion Reinforcements',text:'Put 1 minion into play.',image:'https://marvelcdb.com/bundles/cards/17402a.png'}
  ]},
  ultron:{name:'Ultron',stages:[{hp:14,attack:2,scheme:1},{hp:17,attack:2,scheme:2}],encounters:[
    {title:'Robot Assault',text:'Deal 2 damage.',image:'https://marvelcdb.com/bundles/cards/23001a.png'},
    {title:'Upgrade',text:'Add a minion to villain deck.',image:'https://marvelcdb.com/bundles/cards/23002a.png'}
  ]}
};

const heroSelect = document.getElementById('heroSelect');
document.getElementById('loadHero').addEventListener('click',()=>{
  const sel = heroSelect.value;
  if(!sel || !HERO_DECKS[sel]){ log('Select a hero'); return; }
  const h = HERO_DECKS[sel];
  state.hero.name = h.name; state.hero.deck = h.deck.slice(); state.hero.hand = []; state.hero.handSize = h.handSize;
  log(`Loaded hero deck: ${h.name}`);
});

const villainSel = document.getElementById('villainSel');
const difficultySel = document.getElementById('difficulty');
const modularSel = document.getElementById('modular');
const villainInfo = document.getElementById('villainInfo');
const cardDisplay = document.getElementById('cardDisplay');
const vHP = document.getElementById('vHP');
const threat = document.getElementById('threat');

document.getElementById('loadVillain').addEventListener('click',()=>{
  const v = villainSel.value; if(!VILLAIN_DECKS[v]){ log('Select villain'); return; }
  const vil = VILLAIN_DECKS[v];
  state.villain.name = vil.name; state.villain.stages = vil.stages.slice(); state.villain.stageIndex=0;
  state.villain.deck = vil.encounters.slice(); shuffleArray(state.villain.deck); state.villain.discard=[];
  state.villain.hpMax = vil.stages[0].hp; state.villain.hp = vil.stages[0].hp; state.villain.attack=vil.stages[0].attack; state.villain.scheme=vil.stages[0].scheme;
  vHP.value = state.villain.hp;
  villainInfo.innerText = `${state.villain.name} — Stage 1 HP ${state.villain.hp}/${state.villain.hpMax}`;
  log(`Villain loaded: ${state.villain.name}, encounter deck: ${state.villain.deck.length} cards.`);
});

document.getElementById('readyDraw').addEventListener('click',()=>{
  while(state.hero.hand.length < state.hero.handSize && state.hero.deck.length>0){
    const c = state.hero.deck.shift();
    state.hero.hand.push(c);
  }
  log(`Drew up to hand size (${state.hero.hand.length})`);
});

document.getElementById('villainPhase').addEventListener('click',()=>{
  log('Villain phase starting...');
  threat.value = parseInt(threat.value||'0') + 1;
  const c = drawVillainEncounter();
  if(c) displayCard(c);
  log(`Villain attacks for ${state.villain.attack}, scheme ${state.villain.scheme}`);
});

function drawVillainEncounter(){
  if(!state.villain.deck.length){ if(state.villain.discard.length){ state.villain.deck = state.villain.discard.splice(0); shuffleArray(state.villain.deck); log('Encounter reshuffled'); } else return null; }
  const c = state.villain.deck.shift(); state.villain.discard.push(c); return c;
}
function displayCard(c){ cardDisplay.innerHTML = `<strong>${c.title}</strong><div class="muted small" style="margin-top:6px">${c.text}</div>`; if(c.image){ const img = document.createElement('img'); img.src=c.image; img.className='cardimg'; cardDisplay.appendChild(img); } }
function shuffleArray(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } }

document.getElementById('vHpMinus').addEventListener('click',()=>{state.villain.hp=Math.max(0,parseInt(vHP.value||0)-1);vHP.value=state.villain.hp; log('Villain HP -1');});
document.getElementById('vHpPlus').addEventListener('click',()=>{state.villain.hp=parseInt(vHP.value||0)+1;vHP.value=state.villain.hp; log('Villain HP +1');});
document.getElementById('threatPlus').addEventListener('click',()=>{threat.value=parseInt(threat.value||0)+1; log('Threat +1');});

log('App ready. Prebuilt hero & villain decks loaded. Tap “Load Hero” then “Load Villain”.');
</script>
</body>
</html>
